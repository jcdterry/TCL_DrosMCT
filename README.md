# Data and Scripts for *Natural enemies have inconsistent impacts on the coexistence of competing species*  (Terry, Chen & Lewis 2021)


## Contents:

* `Fitting Core STAN models.rmd` Fits core STAN models and conducts LOO analysis. 
* `Main Text Analyses.rmd` Code for analyses and figures in main text 
* Scripts to generate appendices:
  + `SI1.rmd` Further Experimental Design Details
  + `SI2.rmd` Model Design - Allee Effect & Sex Ratio
  + `SI3.rmd` Sensitivity to Priors
  + `SI4.rmd` Additional Results and model fit diagnostics

Folders:

* `Scripts/` Source code for utility functions to write STAN models and analyse STAN outputs 
* `Data/` Raw data:
  + `d_both.csv` is the principal data file, arranged in long form with 1 row = total count of one species from 1 vial. It probably has too many columns, but represents the founder species in multiple ways for ease of use in different analyses
  + `Clean_IntraData.csv` and `CleanInterData.csv` include the same data but with 1 row = 1 vial. Where avaiable, counts are split by emergence time and sex. They also include data from the 'cold' (20 degree) treatment that yielded insufficent usable data for analysis.
  + `Data entry table.csv` includes the original layout of the vials within boxes in the incubator.
* `StanModels/`  Folder containing STAN models used to fit all models. Models are 'written' by the `Fitting Core STAN models.rmd` script, but are included here to avoid having to run the script to view the model. 
* `LOO/` Empty, Storage for outputs from `loo()` 
* `StanFits/` Empty, Storage for STAN fit objects used in main text analysis. 
* `StanFitsPriorTest/` Empty, Storage for STAN fit objects created while comparing different prior specifications
* `Plots/` Plots generated by the markdown documents for inclusion in the main text
* `Images/` Illustrative photos used in SI documents 


The fitted STAN models are not included, as they are nearly a gigabyte in size. They can be generated by running the scripts, or from 

## Usage and further information

Feel free to use these code and data as you wish, but please do cite the paper or preprint (https://doi.org/10.1101/2020.08.27.270389). Any questions regarding the code or data here should be directed to Chris Terry. 

Note that this is 'version 2' of the repository, made public in February 2021 to accompany a revised preprint. Code relating to the original preprint (published August 2020) is accessible by reverting commits. 


## Version information:

In case of difficulties in reproduction.

R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Other attached packages:

Rcpp_1.0.5          
pillar_1.4.6        
compiler_4.0.2      
prettyunits_1.1.1   
tools_4.0.2         
packrat_0.5.0       
pkgbuild_1.1.0      
jsonlite_1.7.1      
lifecycle_0.2.0     
tibble_3.0.3        
gtable_0.3.0        
pkgconfig_2.0.3     
rlang_0.4.7         
cli_2.0.2           
rstudioapi_0.11     
yaml_2.2.1          
parallel_4.0.2      
curl_4.3            
xfun_0.17           
loo_2.3.1           
gridExtra_2.3       
dplyr_1.0.2         
withr_2.3.0         
generics_0.0.2      
vctrs_0.3.4         
tidyselect_1.1.0    
stats4_4.0.2        
grid_4.0.2          
glue_1.4.2          
inline_0.3.16       
R6_2.4.1            
processx_3.4.4      
fansi_0.4.1         
rstan_2.21.2        
purrr_0.3.4         
magrittr_1.5        
callr_3.4.4         
ggplot2_3.3.2       
codetools_0.2-16    
matrixStats_0.56.0  
ellipsis_0.3.1      
scales_1.1.1        
ps_1.3.4            
StanHeaders_2.21.0-5
assertthat_0.2.1    
colorspace_1.4-1    
V8_3.2.0            
tinytex_0.26        
RcppParallel_5.0.2  
munsell_0.5.0       
crayon_1.3.4   